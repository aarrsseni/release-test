env:
 global:
  - secure: TaDnMoV1QdFT0i30fFMLgIFG8xCVxG70t9Qht6BtKlYmVtly1e35Ee4UfQuF8KAo0jmpQNdhX/dUkkp9vJDyhmjtGBL/l8yaNoFaLF5ilIHZR2dAu1KCvJp+gkuSVXEq/7HwSI4//ehJTI6DdzwC+wFQcNNoDt9O/VVSpGJJvE1vWcnWGTCjq4UekjPbA/xeAa0HW/EiTIcjx5XIloOFirNkcfhN0mvM7D0Uy2QcfFKLmS3MsTjIkgkAu7kwJbD2gR5hxYjWKfudfD2kqRKYbSIgzB+J/fBzarxhPDX2lEz/3HWNcq/yR6POEf3gqdhbmNsLoXeVrURX9qOmhoIh+4NtEMvaogCCOfc43swJQ2sqAX8RchV9zP6i9ueQ7V+XA5uJO2QjcFXStqe6i8sBZn4pwzcm3ATVNrWfh8YlaC5aNxb0cRYadKAQNYCNYF31p6saghbydv45FiYfYfMzUf9zGrSJiTo4WV/CHPL26p/qUXvdxAcKwzqWM5cvdogm2FWL+o57KC4ZgNV4B3cdfz6GDk6zk1vRRsjDHzIxtSFJfOn44NQaI4wG81JrIyL/EPPazqvqXUhSCLwOy7uuWhkSeEnbAVZtnwLqDQ9fNwgBfNjQ2q43HEkyyenAZc3nrjLlRFIbW08hb2Uue+IYN4iX08BGUdied2K9SPbIXh4=
  - secure: VdnNlIXEaIXNQOWAOzOBg89c0YeK8Ad7ldYthdR6avTcOysZy+9brgvV7FJG8ejOVDbU5vCDNaJqRK7GvsO2VjdllBSvYMhSR3L6tBtue+cCDz291yFfIBZl8BP8IZz5onou583a/EtlXMbZSU4TQB32g3FHD4w12JojGonAmI/FbvwQ6engVpZ0JUZkY5xJiwKk4A2TBtmsADahdNOuDe9Kw9r5YWZ2O57gu9ZjWaeffxbgJAbWM1rAvJUjPyTMnvGb/3MFmigCZ9GnBejYLELsHKDwUo/A40eZrUYia51cpzwVEdo2I7bwfhcjQT9VjI0pNIbShETnTP8Bd3Z/tY0jcM41SsQELVWlgVI/z5QDmReH9aKAj3qkHFs8ONnWwWfdMhjE2fzBSUJwz8EZnrln2cpe9kuhMFXk0384gzj3uKq5ebiJNPoNkcexmQdKkgPOuOweP+KQTq333R7G+8UHRpYkc/CjfViBbxKAooqQCTPt+vZuszEDSOlcGUlpaH+vEiq0vPGaWTStcj+rUYUvPOwVLtJzaIwa14alseO4L/kWPagMuH8wI6bTVPWVYsbgAuzOyi7eBgyY33WdW2S0NyoQXpkuVfJycx6wcgwGj20Jm+waGZJ4YCECPEEHIIzQw5NhYs0gLxOBpjCd9T/cN7i71Adrg/qWQUM+njE=
  #Api key for bintray and passphrase for gpg
  - secure: Uvquds1o/XszWMbprOj6FpC2IIdiF7Bvf+Bxi6U8zHHY/EIFJQzjwMAFOHRsfooi9ps4NIFwhrBYldHNMtzkdpPoS2LN4YEnGFPqrDN/pa0Syx+/ZfDJXTXTy8BO7eDKxZWvLWQ0hnCneDxOtty11LZrYfYbBYkI0x3/to+EKhROWLMdE19mG87/jR756TEABS8kDJ/emzgN7sZjfhTEb4I0HG8wG3StY4mQ9bE6cTV1/L4GRYEKkXYhhRh4lmJDCXIPIl8tH6cz3HBg8eUpaQn2LHswM+m8kSvT5Wlbz4PK2UO5u/irWGyxSVi1+Og6RutCIwon+q1g6FvHzD7MwPBzN9mBpEipjl2OiDOG5uVEP6T+pBgNiaxFK3KUPkXtUUj/B2Gnw/GRB+VeujydDwr51HRfi3/kcGRFiEqIbpuweesE+f+H7ql58Tols8iypx734nrQTywQ50IdhebPhxaC4995GpSOmZkIYCv82c3NGwHL2UEtqwH9QbnL+gLYqrhSaB08e5UP+h+/q4M5AxeSjPAnAsNHWVBALSi57mFZ/LqDoU3WTC0yToRFIz9eU61f+mtJI/Yj1LVJZi5E5SlfNzSCtIWlBpIitVWajmRehSLqtsocPSWx7sHWuzugHhfocRPkTfH0GdgQ+yxA9WIvK3E0cOp65IWsxK9zTDI=
  - secure: oDgyUpmonEFPSs0bhh07lmFg0qPm3fwYHc4wVN1eOMj9p+baN6bG/7bP3qXCh6/WH+dFfHz64cV0QD927n3+jChjQwygj+zK3fjW7wrbYGvsUjz8IxaTSqdZy6wiubVl2QYdhVbjJ+rY7GOkWA54G5lQPirdgjJAYxZNvo7UphL76uZewwA8yrQGn7nFOQaTKBZ/gMMMsj3Ho7i5+L/ptlwC1TBm5B04DFbVdgMKDQIc+JKjadzvbqkG9VDzxUBn2t7dKuo3DaT1ChbfInm9+xen5NsG1nvIkrELaHCjBz0idZh8R7n3Z2/F9TmyMmmSUfQR+NwwNk9+GdluT/nDlADFMlN+xM94kJ80Zm8RAQveV9KhqmyTAgdJQzRNE/RWxyV2A777a5VIbTEBwUj4KxPgW3K9m/wJr36A1b2K33ToGbmZeWStzSH9ElHW59VQJGtlGsmhjxPujNF0wpCcY5gUEMvpsSP6trAUBt5SkMAwojOYSxj7j40GZKNzhobFtjSCJHsMHx8/vvXSD4ztW4vlGQYa3KjLmk0wip/lbb7wdLBO8Mfv2potenWHezdqtBXmd06ZvTLqr67ZA1LpqcBpY/PEkysS6pAuhrTPGXaGg72loRBdOEEmDEyoEzpamDSmaOhvTUiK2I0P5k7k3HQeZDrXZ9cA/7jSZtc9zkc=


os:
 - linux
 - osx

language: java
install: true

script:
 - if [ $TRAVIS_OS_NAME == "osx" ]; then
    chmod +x ./prepare-mac.sh;
    ./prepare-mac.sh;
   fi
 - if [ $TRAVIS_OS_NAME == "linux" ]; then
    chmod +x ./prepare-linux.sh;
    ./prepare-linux.sh;
   fi

deploy:
  - provider: script
    skip_cleanup: true
    script:
      cd target;
      curl -X PUT -H X-GPG-PASSPHRASE:$PASSPHRASE_BINTRAY --basic -u aarrsseni:$BINTRAY_API_KEY https://api.bintray.com/content/aarrsseni/release-test/release-test/$TRAVIS_TAG/release-test-$TRAVIS_TAG.zip?publish=1
    on:
      branch: master
      condition: $TRAVIS_OS_NAME == "osx"
      tags: true
  - provider: script
    skip_cleanup: true
    script:
      cd target;
      curl -X PUT -H X-GPG-PASSPHRASE:$PASSPHRASE_BINTRAY -H X-Bintray-Debian-Distribution:vivid -H X-Bintray-Debian-Component:main -H X-Bintray-Debian-Architecture:amd64 --basic -u aarrsseni:$BINTRAY_API_KEY https://api.bintray.com/content/aarrsseni/release-test-deb/release-test-deb/$TRAVIS_TAG/release-test-$TRAVIS_TAG.deb?publish=1
    on:
      branch: master
      condition: $TRAVIS_OS_NAME == "linux"
      tags: true
  - provider: script
    skip_cleanup: true
    script:
      cd target;
      curl -X PUT -H X-GPG-PASSPHRASE:$PASSPHRASE_BINTRAY --basic -u aarrsseni:$BINTRAY_API_KEY https://api.bintray.com/content/aarrsseni/release-rpm/release-rpm/$TRAVIS_TAG/release-test-$TRAVIS_TAG-1.x86_64.rpm?publish=1
    on:
      branch: master
      condition: $TRAVIS_OS_NAME == "linux"
      tags: true
# - provider: bintray
#   file: deploy-deb.json
#   user: aarrsseni
#   key:
#    secure: SnQXLgjgKs+LSXOBAuy0zSe80fozN5250Yo/n5Uj80r7CHkSuqYQM4EpL05CcAdRVzxW7huixY5HMmFj3V5DazsMrwJA+8Dh/+D6CNs65VgoeJQtCMBKbboMSbaA7lozOupr6ixNtX5x/jXUQSHUF7LN/n5uA1EH3qkn2QmkT/g6+MBCkD5O622ClhXKL6D9LBo1H4VGL43MtPlea91LMhTzhwk4xmnVgJ6u0wHF+M4QDR7yNHlgQHEjxAHG+t4sresTcisjXyQlQ1DO6MdRs3KgqhWkFkj+pWNzDdguYxmVyozVwplAAOZu7eIgxkse1inWpylQ13LIau7Nb0pdjZO7kdkQDhY8sqIsb/6OFTidwydoUHhvYZkD8Ol63NUVuNmYv1IxZjg4h8MKhGjRYt/eFA41qIFpyHMrVrHXZpPyBH9Vo629jWZGPJrMzyk1zCXOTkBUG6Zx2EOkHGbYuT9wgJe0CUwXM1tRCXusgHcFGq1HiKDXinq1H3d/XOqVBsubN8Xj7fNw4UfJq9MzWEoBnX5OXBQPM4bUsHc8eDWutpPfjS9WmibGQfZf8/U97PFn8a7pPTPkt348tjiCiC1FoDNS5FFsfvbO5fGhLdErSHapZSRqTVlHleonDbkKEBjNxqMh60PYWR3BfemLqfFtBTeG+Qu8EqJsQtMNM9A=
#   passphrase:
#     secure: aRddMXp9914VHcEyTh3xA6WEiDl/ayU8CSRL0bGQ5Bkf/z3Vke8zDj+VindcDew3BwKBg+vSuXez8/rGX50Tya0UQ9Gx6wL84bgYGWnQ2C2ZvKuj2pVCFYqJ9Q7ARiMQrHsVxieLrhABU7b2s0Uc2BE8RaQjNbQVWCwiNcmi901Q3FDOwuve9b3OkbJVKDC4jQiQsXgGoYCCXXhXZX1W493TI0Mtto6EZ5Z5b65U0Qe42j0WexpSXLjDtdqzDFwb+1ourR+sXrJ/NbPFH/D6W5IbGX8B6oLOVmRk3Rz1hfgvNuiRjlOUOSgTiYUctTs4UE3bqjRuD9n+MJp9Mwy4qa88CGX7Qs9QR2LPj7OJvMxAuEe3ZYZlKb0/3EYUCDJb/t8Xc4VZvnFAHm4/PpsesG/G2x6IVi96jb2KojPUG0mmR8UW+THLFYl/DFLO/6YtBb75luebkdwHY8nzYHI24f4LoW2A7mUUNcZcyoVAMPjK/hi8FgsLd1BxozI/uE2wdk/Ie/da2mccgOs369wZflgXDILcqy/gXBHVDVwfsoKC57TlUbJhtkrAl7zcP0O7ImKNYIDQ8IQfMyXkC+vUsNVce+r2DVcExs4rMIJhkDwMkGtU/nmSjbCzgA73odeDTQkXfnrd5YtXEHGUg3BiAK0Paopn4684Vg7WQcDjyQs=
#   skip_cleanup: true
#   on:
#    branch: master
#    condition: $TRAVIS_OS_NAME == "linux"
#    tags: true
# - provider: bintray
#   file: deploy-rpm.json
#   user: aarrsseni
#   key:
#    secure: SnQXLgjgKs+LSXOBAuy0zSe80fozN5250Yo/n5Uj80r7CHkSuqYQM4EpL05CcAdRVzxW7huixY5HMmFj3V5DazsMrwJA+8Dh/+D6CNs65VgoeJQtCMBKbboMSbaA7lozOupr6ixNtX5x/jXUQSHUF7LN/n5uA1EH3qkn2QmkT/g6+MBCkD5O622ClhXKL6D9LBo1H4VGL43MtPlea91LMhTzhwk4xmnVgJ6u0wHF+M4QDR7yNHlgQHEjxAHG+t4sresTcisjXyQlQ1DO6MdRs3KgqhWkFkj+pWNzDdguYxmVyozVwplAAOZu7eIgxkse1inWpylQ13LIau7Nb0pdjZO7kdkQDhY8sqIsb/6OFTidwydoUHhvYZkD8Ol63NUVuNmYv1IxZjg4h8MKhGjRYt/eFA41qIFpyHMrVrHXZpPyBH9Vo629jWZGPJrMzyk1zCXOTkBUG6Zx2EOkHGbYuT9wgJe0CUwXM1tRCXusgHcFGq1HiKDXinq1H3d/XOqVBsubN8Xj7fNw4UfJq9MzWEoBnX5OXBQPM4bUsHc8eDWutpPfjS9WmibGQfZf8/U97PFn8a7pPTPkt348tjiCiC1FoDNS5FFsfvbO5fGhLdErSHapZSRqTVlHleonDbkKEBjNxqMh60PYWR3BfemLqfFtBTeG+Qu8EqJsQtMNM9A=
#   passphrase:
#     secure: aRddMXp9914VHcEyTh3xA6WEiDl/ayU8CSRL0bGQ5Bkf/z3Vke8zDj+VindcDew3BwKBg+vSuXez8/rGX50Tya0UQ9Gx6wL84bgYGWnQ2C2ZvKuj2pVCFYqJ9Q7ARiMQrHsVxieLrhABU7b2s0Uc2BE8RaQjNbQVWCwiNcmi901Q3FDOwuve9b3OkbJVKDC4jQiQsXgGoYCCXXhXZX1W493TI0Mtto6EZ5Z5b65U0Qe42j0WexpSXLjDtdqzDFwb+1ourR+sXrJ/NbPFH/D6W5IbGX8B6oLOVmRk3Rz1hfgvNuiRjlOUOSgTiYUctTs4UE3bqjRuD9n+MJp9Mwy4qa88CGX7Qs9QR2LPj7OJvMxAuEe3ZYZlKb0/3EYUCDJb/t8Xc4VZvnFAHm4/PpsesG/G2x6IVi96jb2KojPUG0mmR8UW+THLFYl/DFLO/6YtBb75luebkdwHY8nzYHI24f4LoW2A7mUUNcZcyoVAMPjK/hi8FgsLd1BxozI/uE2wdk/Ie/da2mccgOs369wZflgXDILcqy/gXBHVDVwfsoKC57TlUbJhtkrAl7zcP0O7ImKNYIDQ8IQfMyXkC+vUsNVce+r2DVcExs4rMIJhkDwMkGtU/nmSjbCzgA73odeDTQkXfnrd5YtXEHGUg3BiAK0Paopn4684Vg7WQcDjyQs=
#   skip_cleanup: true
#   on:
#    branch: master
#    condition: $TRAVIS_OS_NAME == "linux"
#    tags: true
# - provider: bintray
#   file: deploy-mac.json
#   user: aarrsseni
#   key:
#    secure: SnQXLgjgKs+LSXOBAuy0zSe80fozN5250Yo/n5Uj80r7CHkSuqYQM4EpL05CcAdRVzxW7huixY5HMmFj3V5DazsMrwJA+8Dh/+D6CNs65VgoeJQtCMBKbboMSbaA7lozOupr6ixNtX5x/jXUQSHUF7LN/n5uA1EH3qkn2QmkT/g6+MBCkD5O622ClhXKL6D9LBo1H4VGL43MtPlea91LMhTzhwk4xmnVgJ6u0wHF+M4QDR7yNHlgQHEjxAHG+t4sresTcisjXyQlQ1DO6MdRs3KgqhWkFkj+pWNzDdguYxmVyozVwplAAOZu7eIgxkse1inWpylQ13LIau7Nb0pdjZO7kdkQDhY8sqIsb/6OFTidwydoUHhvYZkD8Ol63NUVuNmYv1IxZjg4h8MKhGjRYt/eFA41qIFpyHMrVrHXZpPyBH9Vo629jWZGPJrMzyk1zCXOTkBUG6Zx2EOkHGbYuT9wgJe0CUwXM1tRCXusgHcFGq1HiKDXinq1H3d/XOqVBsubN8Xj7fNw4UfJq9MzWEoBnX5OXBQPM4bUsHc8eDWutpPfjS9WmibGQfZf8/U97PFn8a7pPTPkt348tjiCiC1FoDNS5FFsfvbO5fGhLdErSHapZSRqTVlHleonDbkKEBjNxqMh60PYWR3BfemLqfFtBTeG+Qu8EqJsQtMNM9A=
#   passphrase:
#     secure: aRddMXp9914VHcEyTh3xA6WEiDl/ayU8CSRL0bGQ5Bkf/z3Vke8zDj+VindcDew3BwKBg+vSuXez8/rGX50Tya0UQ9Gx6wL84bgYGWnQ2C2ZvKuj2pVCFYqJ9Q7ARiMQrHsVxieLrhABU7b2s0Uc2BE8RaQjNbQVWCwiNcmi901Q3FDOwuve9b3OkbJVKDC4jQiQsXgGoYCCXXhXZX1W493TI0Mtto6EZ5Z5b65U0Qe42j0WexpSXLjDtdqzDFwb+1ourR+sXrJ/NbPFH/D6W5IbGX8B6oLOVmRk3Rz1hfgvNuiRjlOUOSgTiYUctTs4UE3bqjRuD9n+MJp9Mwy4qa88CGX7Qs9QR2LPj7OJvMxAuEe3ZYZlKb0/3EYUCDJb/t8Xc4VZvnFAHm4/PpsesG/G2x6IVi96jb2KojPUG0mmR8UW+THLFYl/DFLO/6YtBb75luebkdwHY8nzYHI24f4LoW2A7mUUNcZcyoVAMPjK/hi8FgsLd1BxozI/uE2wdk/Ie/da2mccgOs369wZflgXDILcqy/gXBHVDVwfsoKC57TlUbJhtkrAl7zcP0O7ImKNYIDQ8IQfMyXkC+vUsNVce+r2DVcExs4rMIJhkDwMkGtU/nmSjbCzgA73odeDTQkXfnrd5YtXEHGUg3BiAK0Paopn4684Vg7WQcDjyQs=
#   skip_cleanup: true
#   on:
#    branch: master
#    condition: $TRAVIS_OS_NAME == "osx"
#    tags: true


after_deploy:
 - if [ $TRAVIS_OS_NAME == "osx" ]; then
  chmod +x ./update-homebrew.sh;
  ./update-homebrew.sh;
  fi



